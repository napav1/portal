!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}(self.webpackChunknapa_v11=self.webpackChunknapa_v11||[]).push([[718],{49718:function(e,n,r){"use strict";r.r(n),r.d(n,{LoginModule:function(){return I}});var o=r(61116),s=r(65590),a=r(31041),u=r(35366),d=r(42693),l=r(31225),c=r(47727),f=r(33825),p=function(){var e=function(){function e(i,n){t(this,e),this.http=i,this.configService=n,this.endpoint_1="auth/login",this.lang=localStorage.getItem("lang"),this.httpOptions={headers:new d.WM({"Content-Type":"application/json"})}}return i(e,[{key:"login",value:function(t){var e=JSON.stringify(t);return this.http.post("".concat(this.configService.http_url).concat(this.endpoint_1),e,this.httpOptions).pipe((0,c.K)(this.handleError))}},{key:"handleError",value:function(t){return 0===t.status?console.error("An error occurred:",t.error):console.error(t),(0,l._)(t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(d.eN),u.LFG(f.E))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),g=r(38760),Z=r(60649),m=r(44751),v=r(63561);function h(t,e){1&t&&(u.TgZ(0,"div"),u._uU(1,"Email is required"),u.qZA())}function q(t,e){if(1&t&&(u.TgZ(0,"div",27),u.YNc(1,h,2,0,"div",28),u.qZA()),2&t){var i=u.oxw();u.xp6(1),u.Q6J("ngIf",i.f.email.errors.required)}}function A(t,e){1&t&&(u.TgZ(0,"div"),u._uU(1,"Password is required"),u.qZA())}function T(t,e){if(1&t&&(u.TgZ(0,"div",27),u.YNc(1,A,2,0,"div",28),u.qZA()),2&t){var i=u.oxw();u.xp6(1),u.Q6J("ngIf",i.f.password.errors.required)}}function b(t,e){1&t&&u._UZ(0,"i",29)}var _,w,y=function(t){return{"is-invalid":t}},x=[{path:"",component:(_=function(){function e(i,n,r,o,s,a,u){t(this,e),this.fb=i,this.loginService=n,this.configService=r,this.tokenStorage=o,this.router=s,this.route=a,this.translate=u,this.is_spinner=!1,this.submitted=!1,this.currentYear=(new Date).getFullYear(),this.getLang=localStorage.getItem("lang")}return i(e,[{key:"ngOnInit",value:function(){this.formValues()}},{key:"ngAfterViewInit",value:function(){}},{key:"formValues",value:function(){this.forms=this.fb.group({email:["",[a.kI.required,a.kI.email]],password:["",[a.kI.required]]})}},{key:"f",get:function(){return this.forms.controls}},{key:"login",value:function(t,e){var i=this;if("submit"==e.type){if(this.submitted=!0,this.is_spinner=!0,this.forms.invalid)return;this.loginService.login(t).subscribe(function(t){if(200==t.data.status_code&&(i.is_spinner=!1,t.data.token)){i.tokenStorage.saveToken(t.data.token),i.tokenStorage.saveUser(t.data);var e=i.route.snapshot.queryParamMap.get("returnUrl");i.router.navigate([e||"/dashboard"])}},function(t){0==t.status?(i.is_spinner=!1,i.type="danger",i.status=t.status,i.statusText="Check your internet connection.",i.timeout=300):(i.is_spinner=!1,i.forms.setValue({email:"",password:""}),i.type="danger",i.statusText=t.error.message,i.timeout=300)})}}}]),e}(),_.\u0275fac=function(t){return new(t||_)(u.Y36(a.qu),u.Y36(p),u.Y36(f.E),u.Y36(g.i),u.Y36(s.F0),u.Y36(s.gz),u.Y36(Z.sK))},_.\u0275cmp=u.Xpm({type:_,selectors:[["app-login"]],decls:57,vars:37,consts:[[1,"center-box"],[1,"container"],[1,"row"],[1,"col-md-10","offset-md-1"],[1,"row","text-center","animated","fadeInDown","shadow","box-rounded"],[1,"col-md-6","fill",2,"padding","0"],["src","assets/img/advert.jpg","alt","adverts",1,"logo-name","img-reponsive",2,"width","160px"],[1,"col-md-6",2,"background-color","#fff"],[1,"middle-box",2,"margin-top","50px"],["src","assets/img/NAPA_ROUNDED.svg","alt","logo",1,"logo-name","img-reponsive",2,"width","160px"],[1,"logo_title"],[1,"logo_abbrev"],[1,"col-md-12"],["method","post","name","login","role","form","novalidate","",3,"formGroup","ngSubmit"],[1,"input-group","m-b"],[1,"input-group-prepend"],[1,"input-group-addon"],[1,"fas","fa-envelope"],["type","email","formControlName","email","required","",1,"form-control",3,"placeholder","ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"fas","fa-lock"],["type","password","formControlName","password","required","",1,"form-control",3,"placeholder","ngClass"],["type","submit",1,"btn","btn-primary","btn-block","btn-rounded",3,"disabled"],["class","fas fa-spinner fa-pulse fa-fw","aria-hidden","true",4,"ngIf"],[3,"type","dismissOnTimeout"],[2,"border-color","#1361a0"],[1,"text-center",2,"color","#1361a0"],[1,"invalid-feedback"],[4,"ngIf"],["aria-hidden","true",1,"fas","fa-spinner","fa-pulse","fa-fw"]],template:function(t,e){1&t&&(u.TgZ(0,"div"),u._UZ(1,"app-public-nav"),u.qZA(),u.TgZ(2,"div",0),u.TgZ(3,"div",1),u.TgZ(4,"div",2),u.TgZ(5,"div",3),u.TgZ(6,"div",4),u.TgZ(7,"div",5),u._UZ(8,"img",6),u.qZA(),u.TgZ(9,"div",7),u.TgZ(10,"div",8),u.TgZ(11,"div"),u._UZ(12,"img",9),u.TgZ(13,"div",10),u.TgZ(14,"strong"),u._uU(15),u.ALo(16,"translate"),u.qZA(),u.qZA(),u.TgZ(17,"div",11),u.TgZ(18,"strong"),u._uU(19),u.ALo(20,"translate"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(21,"div",2),u.TgZ(22,"div",12),u.TgZ(23,"form",13),u.NdJ("ngSubmit",function(t){return e.login(e.forms.value,t)}),u.TgZ(24,"div",14),u.TgZ(25,"div",15),u.TgZ(26,"span",16),u._UZ(27,"i",17),u.qZA(),u.qZA(),u._UZ(28,"input",18),u.ALo(29,"translate"),u.YNc(30,q,2,1,"div",19),u.qZA(),u.TgZ(31,"div",14),u.TgZ(32,"div",15),u.TgZ(33,"span",16),u._UZ(34,"i",20),u.qZA(),u.qZA(),u._UZ(35,"input",21),u.ALo(36,"translate"),u.YNc(37,T,2,1,"div",19),u.qZA(),u.TgZ(38,"button",22),u.YNc(39,b,1,0,"i",23),u._uU(40),u.ALo(41,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u._UZ(42,"br"),u.TgZ(43,"div",2),u.TgZ(44,"div",12),u.TgZ(45,"alert",24),u.TgZ(46,"strong"),u._uU(47),u.qZA(),u._uU(48),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(49,"div",2),u.TgZ(50,"div",12),u._UZ(51,"hr",25),u.TgZ(52,"div"),u.TgZ(53,"div",26),u._uU(54),u.ALo(55,"translate"),u.ALo(56,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(15),u.Oqu(u.lcZ(16,19,"national_physical_addressing")),u.xp6(4),u.Oqu(u.lcZ(20,21,"napa")),u.xp6(4),u.Q6J("formGroup",e.forms),u.xp6(5),u.s9C("placeholder",u.lcZ(29,23,"email")),u.Q6J("ngClass",u.VKq(33,y,(e.submitted||e.f.email.touched||e.f.email.dirty)&&e.f.email.errors)),u.xp6(2),u.Q6J("ngIf",(e.submitted||e.f.email.touched||e.f.email.dirty)&&e.f.email.errors),u.xp6(5),u.s9C("placeholder",u.lcZ(36,25,"password")),u.Q6J("ngClass",u.VKq(35,y,(e.submitted||e.f.password.touched||e.f.password.dirty)&&e.f.password.errors)),u.xp6(2),u.Q6J("ngIf",(e.submitted||e.f.password.touched||e.f.password.dirty)&&e.f.password.errors),u.xp6(1),u.Q6J("disabled",!e.forms.valid),u.xp6(1),u.Q6J("ngIf",e.is_spinner),u.xp6(1),u.hij("\xa0",u.lcZ(41,27,"login"),""),u.xp6(5),u.Q6J("type",e.type)("dismissOnTimeout",e.timeout),u.xp6(2),u.Oqu(e.status),u.xp6(1),u.hij(" ",e.statusText," "),u.xp6(6),u.lnq(" ",u.lcZ(55,29,"copyright")," \xa9\xa0",e.currentYear,".\xa0",u.lcZ(56,31,"org_name")," "))},directives:[m.N,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.Q7,o.mk,o.O5,v.wx],pipes:[Z.X$],styles:[""]}),_)}],k=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[s.Bz.forChild(x)],s.Bz]}),e}(),U=r(56594),I=((w=function e(){t(this,e)}).\u0275fac=function(t){return new(t||w)},w.\u0275mod=u.oAB({type:w}),w.\u0275inj=u.cJS({imports:[[o.ez,k,a.UX,U.m]]}),w)}}])}();