(self.webpackChunknapa_v11=self.webpackChunknapa_v11||[]).push([[718],{49718:function(t,e,i){"use strict";i.r(e),i.d(e,{LoginModule:function(){return x}});var r=i(61116),s=i(65590),o=i(31041),n=i(35366),a=i(42693),d=i(31225),l=i(47727),u=i(33825);let p=(()=>{class t{constructor(t,e){this.http=t,this.configService=e,this.endpoint_1="auth/login",this.lang=localStorage.getItem("lang"),this.httpOptions={headers:new a.WM({"Content-Type":"application/json"})}}login(t){let e=JSON.stringify(t);return this.http.post(`${this.configService.http_url}${this.endpoint_1}`,e,this.httpOptions).pipe((0,l.K)(this.handleError))}handleError(t){return 0===t.status?console.error("An error occurred:",t.error):console.error(t),(0,d._)(t)}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(a.eN),n.LFG(u.E))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=i(38760),c=i(60649),f=i(44751),Z=i(63561);function m(t,e){1&t&&(n.TgZ(0,"div"),n._uU(1,"Email is required"),n.qZA())}function h(t,e){if(1&t&&(n.TgZ(0,"div",27),n.YNc(1,m,2,0,"div",28),n.qZA()),2&t){const t=n.oxw();n.xp6(1),n.Q6J("ngIf",t.f.email.errors.required)}}function v(t,e){1&t&&(n.TgZ(0,"div"),n._uU(1,"Password is required"),n.qZA())}function q(t,e){if(1&t&&(n.TgZ(0,"div",27),n.YNc(1,v,2,0,"div",28),n.qZA()),2&t){const t=n.oxw();n.xp6(1),n.Q6J("ngIf",t.f.password.errors.required)}}function A(t,e){1&t&&n._UZ(0,"i",29)}const T=function(t){return{"is-invalid":t}},_=[{path:"",component:(()=>{class t{constructor(t,e,i,r,s,o,n){this.fb=t,this.loginService=e,this.configService=i,this.tokenStorage=r,this.router=s,this.route=o,this.translate=n,this.is_spinner=!1,this.submitted=!1,this.currentYear=(new Date).getFullYear(),this.getLang=localStorage.getItem("lang")}ngOnInit(){this.formValues()}ngAfterViewInit(){}formValues(){this.forms=this.fb.group({email:["",[o.kI.required,o.kI.email]],password:["",[o.kI.required]]})}get f(){return this.forms.controls}login(t,e){if("submit"==e.type){if(this.submitted=!0,this.is_spinner=!0,this.forms.invalid)return;this.loginService.login(t).subscribe(t=>{if(200==t.data.status_code&&(this.is_spinner=!1,t.data.token)){this.tokenStorage.saveToken(t.data.token),this.tokenStorage.saveUser(t.data);const e=this.route.snapshot.queryParamMap.get("returnUrl");this.router.navigate([e||"/dashboard"])}},t=>{0==t.status?(this.is_spinner=!1,this.type="danger",this.status=t.status,this.statusText="Check your internet connection.",this.timeout=300):(this.is_spinner=!1,this.forms.setValue({email:"",password:""}),this.type="danger",this.statusText=t.error.message,this.timeout=300)})}}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(o.qu),n.Y36(p),n.Y36(u.E),n.Y36(g.i),n.Y36(s.F0),n.Y36(s.gz),n.Y36(c.sK))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-login"]],decls:57,vars:37,consts:[[1,"center-box"],[1,"container"],[1,"row"],[1,"col-md-10","offset-md-1"],[1,"row","text-center","animated","fadeInDown","shadow","box-rounded"],[1,"col-md-6","fill",2,"padding","0"],["src","assets/img/advert.jpg","alt","adverts",1,"logo-name","img-reponsive",2,"width","160px"],[1,"col-md-6",2,"background-color","#fff"],[1,"middle-box",2,"margin-top","50px"],["src","assets/img/NAPA_ROUNDED.svg","alt","logo",1,"logo-name","img-reponsive",2,"width","160px"],[1,"logo_title"],[1,"logo_abbrev"],[1,"col-md-12"],["method","post","name","login","role","form","novalidate","",3,"formGroup","ngSubmit"],[1,"input-group","m-b"],[1,"input-group-prepend"],[1,"input-group-addon"],[1,"fas","fa-envelope"],["type","email","formControlName","email","required","",1,"form-control",3,"placeholder","ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"fas","fa-lock"],["type","password","formControlName","password","required","",1,"form-control",3,"placeholder","ngClass"],["type","submit",1,"btn","btn-primary","btn-block","btn-rounded",3,"disabled"],["class","fas fa-spinner fa-pulse fa-fw","aria-hidden","true",4,"ngIf"],[3,"type","dismissOnTimeout"],[2,"border-color","#1361a0"],[1,"text-center",2,"color","#1361a0"],[1,"invalid-feedback"],[4,"ngIf"],["aria-hidden","true",1,"fas","fa-spinner","fa-pulse","fa-fw"]],template:function(t,e){1&t&&(n.TgZ(0,"div"),n._UZ(1,"app-public-nav"),n.qZA(),n.TgZ(2,"div",0),n.TgZ(3,"div",1),n.TgZ(4,"div",2),n.TgZ(5,"div",3),n.TgZ(6,"div",4),n.TgZ(7,"div",5),n._UZ(8,"img",6),n.qZA(),n.TgZ(9,"div",7),n.TgZ(10,"div",8),n.TgZ(11,"div"),n._UZ(12,"img",9),n.TgZ(13,"div",10),n.TgZ(14,"strong"),n._uU(15),n.ALo(16,"translate"),n.qZA(),n.qZA(),n.TgZ(17,"div",11),n.TgZ(18,"strong"),n._uU(19),n.ALo(20,"translate"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(21,"div",2),n.TgZ(22,"div",12),n.TgZ(23,"form",13),n.NdJ("ngSubmit",function(t){return e.login(e.forms.value,t)}),n.TgZ(24,"div",14),n.TgZ(25,"div",15),n.TgZ(26,"span",16),n._UZ(27,"i",17),n.qZA(),n.qZA(),n._UZ(28,"input",18),n.ALo(29,"translate"),n.YNc(30,h,2,1,"div",19),n.qZA(),n.TgZ(31,"div",14),n.TgZ(32,"div",15),n.TgZ(33,"span",16),n._UZ(34,"i",20),n.qZA(),n.qZA(),n._UZ(35,"input",21),n.ALo(36,"translate"),n.YNc(37,q,2,1,"div",19),n.qZA(),n.TgZ(38,"button",22),n.YNc(39,A,1,0,"i",23),n._uU(40),n.ALo(41,"translate"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(42,"br"),n.TgZ(43,"div",2),n.TgZ(44,"div",12),n.TgZ(45,"alert",24),n.TgZ(46,"strong"),n._uU(47),n.qZA(),n._uU(48),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(49,"div",2),n.TgZ(50,"div",12),n._UZ(51,"hr",25),n.TgZ(52,"div"),n.TgZ(53,"div",26),n._uU(54),n.ALo(55,"translate"),n.ALo(56,"translate"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&t&&(n.xp6(15),n.Oqu(n.lcZ(16,19,"national_physical_addressing")),n.xp6(4),n.Oqu(n.lcZ(20,21,"napa")),n.xp6(4),n.Q6J("formGroup",e.forms),n.xp6(5),n.s9C("placeholder",n.lcZ(29,23,"email")),n.Q6J("ngClass",n.VKq(33,T,(e.submitted||e.f.email.touched||e.f.email.dirty)&&e.f.email.errors)),n.xp6(2),n.Q6J("ngIf",(e.submitted||e.f.email.touched||e.f.email.dirty)&&e.f.email.errors),n.xp6(5),n.s9C("placeholder",n.lcZ(36,25,"password")),n.Q6J("ngClass",n.VKq(35,T,(e.submitted||e.f.password.touched||e.f.password.dirty)&&e.f.password.errors)),n.xp6(2),n.Q6J("ngIf",(e.submitted||e.f.password.touched||e.f.password.dirty)&&e.f.password.errors),n.xp6(1),n.Q6J("disabled",!e.forms.valid),n.xp6(1),n.Q6J("ngIf",e.is_spinner),n.xp6(1),n.hij("\xa0",n.lcZ(41,27,"login"),""),n.xp6(5),n.Q6J("type",e.type)("dismissOnTimeout",e.timeout),n.xp6(2),n.Oqu(e.status),n.xp6(1),n.hij(" ",e.statusText," "),n.xp6(6),n.lnq(" ",n.lcZ(55,29,"copyright")," \xa9\xa0",e.currentYear,".\xa0",n.lcZ(56,31,"org_name")," "))},directives:[f.N,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,o.Q7,r.mk,r.O5,Z.wx],pipes:[c.X$],styles:[""]}),t})()}];let b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[s.Bz.forChild(_)],s.Bz]}),t})();var w=i(56594);let x=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[r.ez,b,o.UX,w.m]]}),t})()}}]);